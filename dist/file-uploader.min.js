!function t(e,i,n){function s(o,l){if(!i[o]){if(!e[o]){var a="function"==typeof require&&require;if(!l&&a)return a(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return s(i?i:t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e){"use strict";function i(){this.el=document.createElement("div"),this.state={view:0},this.plugins={},this.defaults={plugin:"upload",closeOnUpload:!0},s.call(this),setTimeout(this._init.bind(this),0)}var n=t("merge"),s=t("eventemitter2").EventEmitter2,r=t("emit-bindings"),o=t("./src/upload-event"),l=(t("./src/utils"),t("./src/plugins/upload")),a=t("./src/plugins/preview");i.prototype=Object.create(s.prototype,{pluginList:{get:function(){var t=Object.keys(this.plugins);return t.map(i.mapPlugins(this.plugins)).filter(i.pluginVisible).map(i.pluginListEl(this.currentPlugin)).reverse()}}}),i.prototype.constructor=i,i.prototype.open=function(t){t=t||{};{var e=this.defaults.plugin,i=t.plugin||e,n=this.plugins[i]||this.plugins[e];this.close.bind(this)}return t.plugin=i,this.prevPlugin=this.currentPlugin,this.currentPlugin=n,this.meta=t.meta||{},this.listEl.innerHTML="",this.pluginList.forEach(this.listEl.appendChild.bind(this.listEl)),this.el.classList.add("show"),this.state.view=1,n?(n.open(t.meta||{},this,this._handlePluginOpen.bind(this,t)),void this.emit("open",n)):void this.emit("error",new Error("No Plugin is found with the name "+i))},i.prototype.close=function(){this.el.classList.remove("show"),this.state.view=0,this.contentEl.innerHTML="",this.currentPlugin&&"function"==typeof this.currentPlugin.teardown&&(this.currentPlugin.teardown(),this.currentPlugin=null),this.emit("close")},i.prototype.upload=function(t){if("object"!=typeof t.files)return void this.emit("error",new Error("target passed to Skoll::upload does not have files array"));if("function"!=typeof this.uploadFn)return void this.emit("error",new Error("No upload function added using Skoll::useToUpload"));var e=this.close.bind(this),i=this.uploadFn,n=this.defaults.closeOnUpload,s=this.emit.bind(this,"error");this._createEvent(t,function(t,r){return t?void s(t):(i(r||_event),n?void e():void 0)})},i.prototype.preview=function(t){if("object"!=typeof t.files)return void this.emit("error",new Error("target passed to Skoll::upload does not have files array"));var e=this.open.bind(this),i=this.meta;this._createEvent(t,function(t,n){i.event=n,e({meta:i,plugin:"preview"})})},i.prototype.addPlugin=function(t,e){var s=n(!0,{},t||{});return e=e||{},i.isPlugin(t)?(this.plugins[s.attributes.name]=s,s.isAdded=!0,s):(s.isAdded=!1,s)},i.prototype.useToUpload=function(t){return"function"==typeof t?void(this.uploadFn=t):void this.emit("error",new Error("useToUpload needs to be passed a function as the first parameter, "+typeof t+" given."))},i.prototype._createEvent=function(t,e){var i={},n=this.emit.bind(this,"error");i.files=t.files,i.originalEvent=t,i.done=this.emit.bind(this,"done"),i.error=n,new o(i,e)},i.isPlugin=function(t){return t&&"object"==typeof t?"function"!=typeof t.open||"function"!=typeof t.teardown?!1:t.attributes?"string"!=typeof t.attributes.name?!1:!0:!1:!1},i.pluginVisible=function(t){return!t.attributes.hide},i.mapPlugins=function(t){return function(e){return t[e]}},i.pluginListEl=function(t){var e=t.attributes.name;return function(t){var i=document.createElement("li"),n=document.createElement("span"),s=t.attributes.name;return n.innerText=s,i.setAttribute("data-plugin-name",s),i.setAttribute("data-emit","skoll.plugin.open"),i.appendChild(n),s===e&&i.setAttribute("data-plugin-selected",!0),i}},i.prototype._init=function(){var t=document.createElement.bind(document,"div");this.tableEl=t(),this.cellEl=t(),this.modalEl=t(),this.contentEl=t(),this.closeEl=t(),this.listEl=document.createElement("ul"),this.el.classList.add("skoll-modal-overlay"),this.el.setAttribute("data-emit","skoll.close"),this.tableEl.classList.add("skoll-modal-table"),this.cellEl.classList.add("skoll-modal-cell"),this.closeEl.classList.add("skoll-modal-close"),this.closeEl.setAttribute("data-emit","skoll.close"),this.modalEl.classList.add("skoll-modal"),this.modalEl.setAttribute("data-emit","skoll.modal.stopPropagation"),this.contentEl.classList.add("skoll-modal-content"),this.listEl.classList.add("skoll-modal-list"),this.el.appendChild(this.tableEl),this.tableEl.appendChild(this.cellEl),this.cellEl.appendChild(this.modalEl),this.modalEl.appendChild(this.listEl),this.modalEl.appendChild(this.closeEl),this.modalEl.appendChild(this.contentEl),r.on("skoll.close",this.close.bind(this)),r.on("skoll.plugin.open",this._onPluginOpen.bind(this)),this.addPlugin(l),this.addPlugin(a)},i.prototype._onPluginOpen=function(t){var e=t.emitTarget;this.open({meta:this.meta,plugin:e.getAttribute("data-plugin-name")})},i.prototype._handlePluginOpen=function(t,e,i){var s=this.defaults.plugin,r=this.open.bind(this,n(t,{plugin:s}));return this.prevPlugin&&this.prevPlugin.teardown(),e?(this.emit("error",e),void(t.plugin!==s&&r())):"string"==typeof i?void(this.contentEl.innerHTML=i):"object"==typeof i&&i.tagName?(this.contentEl.innerHTML="",void this.contentEl.appendChild(i)):void r()},e.exports=new i,e.exports.Skoll=i,e.exports.UploadEvent=o,e.exports.imageToBlob=t("image-to-blob")},{"./src/plugins/preview":7,"./src/plugins/upload":8,"./src/upload-event":9,"./src/utils":10,"emit-bindings":2,eventemitter2:3,"image-to-blob":4,merge:6}],2:[function(t,e){"use strict";function i(t,e,i,n){return t[c](p+e,i,n||!1),i}function n(t,e){if(!t||1!==t.nodeType)return!1;if(d)return d.call(t,e);for(var i=document.querySelectorAll(e,t.parentNode),n=0;n<i.length;++n)if(i[n]==t)return!0;return!1}function s(t,e,i,s){for(t=i?{parentNode:t}:t,s=s||document;(t=t.parentNode)&&t!==document;){if(n(t,e))return t;if(t===s)return}}function r(){var t=this;u.call(t),t.validators=[],t.touchMoveDelta=10,t.initialTouchPoint=null,i(document,"touchstart",t.handleEvent.bind(t)),i(document,"touchmove",t.handleEvent.bind(t)),i(document,"touchend",t.handleEvent.bind(t)),i(document,"click",t.handleEvent.bind(t)),i(document,"input",t.handleEvent.bind(t)),i(document,"submit",t.handleEvent.bind(t))}function o(){return!0}function l(){return!1}function a(t,e){var i=t.touches[0].pageX-e.x,n=t.touches[0].pageY-e.y;return Math.sqrt(i*i+n*n)}var u=t("eventemitter2").EventEmitter2,c=window.addEventListener?"addEventListener":"attachEvent",p="addEventListener"!==c?"on":"",d=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;r.prototype=Object.create(u.prototype),r.prototype.handleEvent=function(t){var e=this;"undefined"==typeof t.isPropagationStopped&&(t.isPropagationStopped=l);var i=t.touches,n=-1;switch(t.type){case"touchstart":e.initialTouchPoint=e.lastTouchPoint={x:i&&i.length?i[0].pageX:0,y:i&&i.length?i[0].pageY:0};break;case"touchmove":i&&i.length&&e.initialTouchPoint&&(n=a(t,e.initialTouchPoint),n>e.touchMoveDelta&&(e.initialTouchPoint=null),e.lastTouchPoint={x:i[0].pageX,y:i[0].pageY});break;case"click":case"touchend":case"input":case"submit":if("click"===t.type&&e.lastTouchPoint&&t.touches&&t.touches.length&&(n=a(t,e.lastTouchPoint),n<e.touchMoveDelta))return t.preventDefault(),void t.stopPropagation();if("touchend"===t.type&&!e.initialTouchPoint)return;var r="[data-emit]",u=t.target||t.srcElement;if(!u.getAttribute("data-emit")&&("A"===u.tagName||"BUTTON"===u.tagName||"INPUT"===u.tagName))return;var c="INPUT"==u.tagName&&("checkbox"==u.type||"radio"==u.type),p=s(u,r,!0,document);if(p){for(var d=-1;p&&!t.isPropagationStopped()&&++d<100;){for(var h=!0,f=0;f<e.validators.length;++f)if(!e.validators[f].call(this,p,t)){h=!1;break}if(h)if("function"!=typeof e.validate||e.validate.call(e,p)){if("FORM"==p.tagName){if("submit"!=t.type){p=s(p,r,!1,document);continue}}else if("INPUT"==p.tagName){if("submit"!=p.type&&"checkbox"!=p.type&&"radio"!=p.type&&"file"!=p.type&&"input"!=t.type){p=s(p,r,!1,document);continue}}else if("SELECT"==p.tagName&&"input"!=t.type){p=s(p,r,!1,document);continue}t.emitTarget=p,e._emit(p,t,c),p=s(p,r,!1,document)}else p=s(p,r,!1,document);else t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),"function"==typeof t.isPropagationStopped&&t.isPropagationStopped()||(t.isPropagationStopped=o),p=null}if(d>=100)throw new Error("Exceeded depth limit for Emit calls.")}else e.emit("unhandled",t);e.initialTouchPoint=null}},r.prototype._emit=function(t,e,i){var n,s=this,r=t.getAttribute("data-emit-options"),l={},a=t.getAttribute("data-emit-ignore");if(a&&a.length){var u=a.toLowerCase().split(" ");for(n=0;n<u.length;++n)if(e.type==u[n])return}if(r&&r.length){var c=r.toLowerCase().split(" ");for(n=0;n<c.length;++n)l[c[n]]=!0}i||l.allowdefault||e.preventDefault(),l.allowpropagate||(e.stopPropagation(),e.stopImmediatePropagation(),"function"==typeof e.isPropagationStopped&&e.isPropagationStopped()||(e.isPropagationStopped=o));var p=t.getAttribute("data-emit");if(p){var d=p.split(",");return l.debounce?(s.timeouts=s.timeouts||{},s.timeouts[t]&&clearTimeout(s.timeouts[t]),void function(){var i=t,n=d,r=e;s.timeouts[t]=setTimeout(function(){n.forEach(function(t){s.emit(t,r)}),clearTimeout(s.timeouts[i]),s.timeouts[i]=null},250)}()):void d.forEach(function(t){s.emit(t,e)})}},r.prototype.addValidator=function(t){for(var e=this,i=!1,n=0;n<e.validators.length;++n)if(e.validators[n]==t){i=!0;break}return i?!1:(e.validators.push(t),!0)},r.prototype.removeValidator=function(t){for(var e=this,i=!1,n=0;n<e.validators.length;++n)if(e.validators[n]==t){e.validators.splice(n,1),i=!0;break}return i},r.singleton=r.singleton||new r,r.singleton.Emit=r,e.exports=r.singleton},{eventemitter2:3}],3:[function(t,e,i){!function(){function t(){this._events={},this._conf&&e.call(this,this._conf)}function e(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function n(t){this._events={},this.newListener=!1,e.call(this,t)}function s(t,e,i,n){if(!i)return[];var r,o,l,a,u,c,p,d=[],h=e.length,f=e[n],m=e[n+1];if(n===h&&i._listeners){if("function"==typeof i._listeners)return t&&t.push(i._listeners),[i];for(r=0,o=i._listeners.length;o>r;r++)t&&t.push(i._listeners[r]);return[i]}if("*"===f||"**"===f||i[f]){if("*"===f){for(l in i)"_listeners"!==l&&i.hasOwnProperty(l)&&(d=d.concat(s(t,e,i[l],n+1)));return d}if("**"===f){p=n+1===h||n+2===h&&"*"===m,p&&i._listeners&&(d=d.concat(s(t,e,i,h)));for(l in i)"_listeners"!==l&&i.hasOwnProperty(l)&&("*"===l||"**"===l?(i[l]._listeners&&!p&&(d=d.concat(s(t,e,i[l],h))),d=d.concat(s(t,e,i[l],n))):d=d.concat(l===m?s(t,e,i[l],n+2):s(t,e,i[l],n)));return d}d=d.concat(s(t,e,i[f],n+1))}if(a=i["*"],a&&s(t,e,a,n+1),u=i["**"])if(h>n){u._listeners&&s(t,e,u,h);for(l in u)"_listeners"!==l&&u.hasOwnProperty(l)&&(l===m?s(t,e,u[l],n+2):l===f?s(t,e,u[l],n+1):(c={},c[l]=u[l],s(t,e,{"**":c},n+1)))}else u._listeners?s(t,e,u,h):u["*"]&&u["*"]._listeners&&s(t,e,u["*"],h);return d}function r(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var i=0,n=t.length;n>i+1;i++)if("**"===t[i]&&"**"===t[i+1])return;for(var s=this.listenerTree,r=t.shift();r;){if(s[r]||(s[r]={}),s=s[r],0===t.length){if(s._listeners){if("function"==typeof s._listeners)s._listeners=[s._listeners,e];else if(o(s._listeners)&&(s._listeners.push(e),!s._listeners.warned)){var a=l;"undefined"!=typeof this._events.maxListeners&&(a=this._events.maxListeners),a>0&&s._listeners.length>a&&(s._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",s._listeners.length),console.trace())}}else s._listeners=e;return!0}r=t.shift()}return!0}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=10;n.prototype.delimiter=".",n.prototype.setMaxListeners=function(e){this._events||t.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},n.prototype.event="",n.prototype.once=function(t,e){return this.many(t,1,e),this},n.prototype.many=function(t,e,i){function n(){0===--e&&s.off(t,n),i.apply(this,arguments)}var s=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");return n._origin=i,this.on(t,n),s},n.prototype.emit=function(){this._events||t.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var i=arguments.length,n=new Array(i-1),r=1;i>r;r++)n[r-1]=arguments[r];for(r=0,i=this._all.length;i>r;r++)this.event=e,this._all[r].apply(this,n)}if("error"===e&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();s.call(this,o,l,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o){if(this.event=e,1===arguments.length)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(var i=arguments.length,n=new Array(i-1),r=1;i>r;r++)n[r-1]=arguments[r];o.apply(this,n)}return!0}if(o){for(var i=arguments.length,n=new Array(i-1),r=1;i>r;r++)n[r-1]=arguments[r];for(var a=o.slice(),r=0,i=a.length;i>r;r++)this.event=e,a[r].apply(this,n);return a.length>0||!!this._all}return!!this._all},n.prototype.on=function(e,i){if("function"==typeof e)return this.onAny(e),this;if("function"!=typeof i)throw new Error("on only accepts instances of Function");if(this._events||t.call(this),this.emit("newListener",e,i),this.wildcard)return r.call(this,e,i),this;if(this._events[e]){if("function"==typeof this._events[e])this._events[e]=[this._events[e],i];else if(o(this._events[e])&&(this._events[e].push(i),!this._events[e].warned)){var n=l;"undefined"!=typeof this._events.maxListeners&&(n=this._events.maxListeners),n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}else this._events[e]=i;return this},n.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},n.prototype.addListener=n.prototype.on,n.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var i,n=[];if(this.wildcard){var r="string"==typeof t?t.split(this.delimiter):t.slice();n=s.call(this,null,r,this.listenerTree,0)}else{if(!this._events[t])return this;i=this._events[t],n.push({_listeners:i})}for(var l=0;l<n.length;l++){var a=n[l];if(i=a._listeners,o(i)){for(var u=-1,c=0,p=i.length;p>c;c++)if(i[c]===e||i[c].listener&&i[c].listener===e||i[c]._origin&&i[c]._origin===e){u=c;break}if(0>u)continue;return this.wildcard?a._listeners.splice(u,1):this._events[t].splice(u,1),0===i.length&&(this.wildcard?delete a._listeners:delete this._events[t]),this}(i===e||i.listener&&i.listener===e||i._origin&&i._origin===e)&&(this.wildcard?delete a._listeners:delete this._events[t])}return this},n.prototype.offAny=function(t){var e,i=0,n=0;if(t&&this._all&&this._all.length>0){for(e=this._all,i=0,n=e.length;n>i;i++)if(t===e[i])return e.splice(i,1),this}else this._all=[];return this},n.prototype.removeListener=n.prototype.off,n.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||t.call(this),this;if(this.wildcard)for(var i="string"==typeof e?e.split(this.delimiter):e.slice(),n=s.call(this,null,i,this.listenerTree,0),r=0;r<n.length;r++){var o=n[r];o._listeners=null}else{if(!this._events[e])return this;this._events[e]=null}return this},n.prototype.listeners=function(e){if(this.wildcard){var i=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return s.call(this,i,n,this.listenerTree,0),i}return this._events||t.call(this),this._events[e]||(this._events[e]=[]),o(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},n.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return n}):"object"==typeof i?i.EventEmitter2=n:window.EventEmitter2=n}()},{}],4:[function(t,e){"use strict";function i(t,e,i){var a;return"function"==typeof e&&(i=e,e={}),e=e||{},t?("object"==typeof t&&"img"===t.tagName.toLowerCase()&&(a=t.src),"string"==typeof t&&(a=t),/^data:/.test(a)?void i(null,n(a)):(e.type=l[e.type]||r(a),e.src=a,e.callback=i,e.type?void o(a,e.type,s.bind(null,e)):void i(new Error("Image type is not supported")))):i(new Error("Pass in a IMG DOM node or a url as first param"))}function n(t){var e,i,n;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(e.length);for(var s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return new Blob([n],{type:i})}function s(t,e,i){return e?void t.callback(e):void t.callback(null,n(i))}function r(t){return t?l[t.split("?").shift().split(".").pop()]:null}var o=t("image-to-data-uri"),l={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",svg:"image/svg+xml"};e.exports=i,e.exports.dataURItoBlob=n,e.exports._handleImageToURI=s,e.exports.getMimeTypeFromUrl=r},{"image-to-data-uri":5}],5:[function(t,e){e.exports=function(t,e,i){var n=document.createElement("canvas"),s=document.createElement("img");"function"==typeof e&&(i=e,e=null),e=e||"image/png",s.crossOrigin="Anonymous",s.onload=function(){var t=n.getContext("2d");n.width=s.width,n.height=s.height,t.drawImage(s,0,0),i(null,n.toDataURL(e))},s.onerror=function(){i(new Error("FailedToLoadImage"))},n.getContext?s.src=t:i(new Error("CanvasIsNotSupported"))}},{}],6:[function(t,e){!function(t){function i(t,e){if("object"!==s(t))return e;for(var n in e)t[n]="object"===s(t[n])&&"object"===s(e[n])?i(t[n],e[n]):e[n];return t}function n(t,e,n){var o=n[0],l=n.length;(t||"object"!==s(o))&&(o={});for(var a=0;l>a;++a){var u=n[a],c=s(u);if("object"===c)for(var p in u){var d=t?r.clone(u[p]):u[p];o[p]=e?i(o[p],d):d}}return o}function s(t){return{}.toString.call(t).slice(8,-1).toLowerCase()}var r=function(t){return n(t===!0,!1,arguments)},o="merge";r.recursive=function(t){return n(t===!0,!0,arguments)},r.clone=function(t){var e,i,n=t,o=s(t);if("array"===o)for(n=[],i=t.length,e=0;i>e;++e)n[e]=r.clone(t[e]);else if("object"===o){n={};for(e in t)n[e]=r.clone(t[e])}return n},t?e.exports=r:window[o]=r}("object"==typeof e&&e&&"object"==typeof e.exports&&e.exports)},{}],7:[function(t,e){function i(t){this.attributes=t}function n(t){return function(e){var i=document.createElement("div");i.classList.add("skoll-preview-image"),i.setAttribute("style","background-image: url("+e+");"),t.appendChild(i)}}function s(t){return"string"!=typeof t.url}function r(t,e){var i=new FileReader;i.onload=function(){e(null,i.result)},i.onerror=function(t){e(t)},i.readAsDataURL(t)}var o=t("emit-bindings"),l={name:"preview",hide:!0};i.prototype={open:function(t,e,i){function n(t,e){u++,!t&&e&&p.push(e),u===a&&c(p,i)}var l=t.event.files,a=l.length,u=0,c=this.render.bind(this),p=[];o.on("skoll.preview.cancel",e.open.bind(e,{meta:t})),o.on("skoll.preview.use",e.upload.bind(e,t.event)),l.filter(s).forEach(function(t){r(t,n)})},teardown:function(){o.removeAllListeners("skoll.preview.cancel"),o.removeAllListeners("skoll.preview.use")},render:function(t,e){var i=document.createElement("div"),s=document.createElement("button"),r=document.createElement("button"),o=document.createElement("div"),l=document.createElement("div");i.classList.add("skoll-preview-wrapper"),o.classList.add("skoll-preview-images"),l.classList.add("skoll-preview-buttons"),s.innerText="Use",s.setAttribute("data-emit","skoll.preview.use"),s.classList.add("skoll-button"),r.innerHTML="Cancel",r.setAttribute("data-emit","skoll.preview.cancel"),r.classList.add("skoll-button"),t.forEach(n(o)),i.appendChild(o),i.appendChild(l),l.appendChild(r),l.appendChild(s),e(null,i)}},e.exports=new i(l)},{"emit-bindings":2}],8:[function(t,e){function i(t){this.attributes=t}var n=t("emit-bindings");i.prototype={open:function(t,e,i){this.skoll=e,n.on("skoll.upload.submit",this.onSubmit.bind(this)),this.render(i)},teardown:function(){this.upload=null,this.input=null,this.container=null,this.skoll=null,n.removeAllListeners("skoll.upload.submit")},onSubmit:function(t){t.preventDefault();var e=this.input,i=e.value,n={files:[{url:i}]};this.skoll.preview(n)},onChange:function(t){this.skoll.preview(t.target)},attachListeners:function(){function t(){clearTimeout(n),s.contains("skoll-upload-drag-over")||s.add("skoll-upload-drag-over")}function e(){s.remove("skoll-upload-drag-over"),s.remove("skoll-upload-show")}function i(){s.remove("skoll-upload-show")||s.add("skoll-upload-show")}var n,s=this.dropzone.classList;this.dropzone.addEventListener("dragover",t),this.dropzone.addEventListener("dragleave",e),this.dropzone.addEventListener("drop",e),this.skoll.el.removeEventListener("dragover",i),this.skoll.el.addEventListener("dragover",i),this.upload.addEventListener("change",this.onChange.bind(this))},render:function(t){var e='<div class="skoll-upload-url"><button class="skoll-button" data-emit="skoll-upload-trigger">Upload</button></div><hr><form class="skoll-upload-form" data-emit="skoll.upload.submit"><p>Enter a URL:</p><input type="url" /><button class="skoll-button">Submit</button></form><div class="skoll-upload-dropzone"><p>Drop you images here!</p><input class="skoll-upload-input" type="file" multiple /></div>';this.el=document.createElement("div"),this.el.classList.add("skoll-upload-plugin"),this.el.innerHTML=e,this.dropzone=this.el.getElementsByClassName("skoll-upload-dropzone")[0],this.upload=this.dropzone.getElementsByClassName("skoll-upload-input")[0],this.attachListeners(),t(null,this.el)}},e.exports=new i({name:"upload"})},{"emit-bindings":2}],9:[function(t,e){"use strict";function i(t,e){n(t,function(i,n){return i?e(i):(t.files=n,void e(null,t))})}function n(t,e){function i(){a++,a===l&&e(null,o)}function n(t,e){return t instanceof Blob?void i():t.url||t.data?void s(t.url||t.data,function(t,n){return t?i():(o[e]=n,void i())}):void i()}var o=r.makeArray(t.files),l=o.length,a=0;o.forEach(n)}var s=t("image-to-blob"),r=t("./utils");e.exports=i},{"./utils":10,"image-to-blob":4}],10:[function(t,e){"use strict";e.exports.makeArray=function(t){return Array.prototype.slice.call(t,0)}},{}]},{},[1]);